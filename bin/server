#!/usr/bin/env php
<?php

use inhere\library\di\Container;
use Sws\Application;

define('BASE_PATH', dirname(__DIR__) );

require dirname(__DIR__) . '/boot/app.php';

/**
 * @var Container $di
 * @var \Inhere\Server\BoxServer $app
 */
$app = $di->get('app');
//$app = new \Sws\server\WebSocketServer($config);
//$app = new \inhere\server\BoxServer($config);

$app->on(Application::ON_BOOTSTRAP, function ($app) {
    // load ws modules
    require dirname(__DIR__) . '/app/Ws/modules.php';
});

/**
 * do run
 * @var Application $app
 */
$app->run();
